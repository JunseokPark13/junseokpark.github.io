---
title: "[Programmers][Javascript] 순위 검색"
author: Bandito
date: 2021-04-29 23:15:00 +0900
categories: [Study, Programmers]
tags: [Algorithm, Programmers, Javascript]
comment: true
---
 
# Programmers - 순위 검색

***
### 문제 링크 : <https://programmers.co.kr/learn/courses/30/lessons/72412>

***

<br/>

## 문제
***

카카오는 하반기 경력 개발자 공개채용을 진행 중에 있으며 현재 지원서 접수와 코딩테스트가 종료되었습니다. 이번 채용에서 지원자는 지원서 작성 시 아래와 같이 4가지 항목을 반드시 선택하도록 하였습니다.

+ 코딩테스트 참여 개발언어 항목에 cpp, java, python 중 하나를 선택해야 합니다.
+ 지원 직군 항목에 backend와 frontend 중 하나를 선택해야 합니다.
+ 지원 경력구분 항목에 junior와 senior 중 하나를 선택해야 합니다.
+ 선호하는 소울푸드로 chicken과 pizza 중 하나를 선택해야 합니다.

인재영입팀에 근무하고 있는 니니즈는 코딩테스트 결과를 분석하여 채용에 참여한 개발팀들에 제공하기 위해 지원자들의 지원 조건을 선택하면 해당 조건에 맞는 지원자가 몇 명인 지 쉽게 알 수 있는 도구를 만들고 있습니다.

예를 들어, 개발팀에서 궁금해하는 문의사항은 다음과 같은 형태가 될 수 있습니다.
코딩테스트에 java로 참여했으며, backend 직군을 선택했고, junior 경력이면서, 소울푸드로 pizza를 선택한 사람 중 코딩테스트 점수를 50점 이상 받은 지원자는 몇 명인가?

물론 이 외에도 각 개발팀의 상황에 따라 아래와 같이 다양한 형태의 문의가 있을 수 있습니다.

+ 코딩테스트에 python으로 참여했으며, frontend 직군을 선택했고, senior 경력이면서, 소울푸드로 chicken을 선택한 사람 중 코딩테스트 점수를 100점 이상 받은 사람은 모두 몇 명인가?
+ 코딩테스트에 cpp로 참여했으며, senior 경력이면서, 소울푸드로 pizza를 선택한 사람 중 코딩테스트 점수를 100점 이상 받은 사람은 모두 몇 명인가?
+ backend 직군을 선택했고, senior 경력이면서 코딩테스트 점수를 200점 이상 받은 사람은 모두 몇 명인가?
+ 소울푸드로 chicken을 선택한 사람 중 코딩테스트 점수를 250점 이상 받은 사람은 모두 몇 명인가?
+ 코딩테스트 점수를 150점 이상 받은 사람은 모두 몇 명인가?

즉, 개발팀에서 궁금해하는 내용은 다음과 같은 형태를 갖습니다.

```
* [조건]을 만족하는 사람 중 코딩테스트 점수를 X점 이상 받은 사람은 모두 몇 명인가?
```

지원자가 지원서에 입력한 4가지의 정보와 획득한 코딩테스트 점수를 하나의 문자열로 구성한 값의 배열 info, 개발팀이 궁금해하는 문의조건이 문자열 형태로 담긴 배열 query가 매개변수로 주어질 때,
각 문의조건에 해당하는 사람들의 숫자를 순서대로 배열에 담아 return 하도록 solution 함수를 완성해 주세요.


## 제한사항

+ info 배열의 크기는 1 이상 50,000 이하입니다.
+ info 배열 각 원소의 값은 지원자가 지원서에 입력한 4가지 값과 코딩테스트 점수를 합친 "개발언어 직군 경력 소울푸드 점수" 형식입니다.
    - 개발언어는 cpp, java, python 중 하나입니다.
    - 직군은 backend, frontend 중 하나입니다.
    - 경력은 junior, senior 중 하나입니다.
    - 소울푸드는 chicken, pizza 중 하나입니다.
    - 점수는 코딩테스트 점수를 의미하며, 1 이상 100,000 이하인 자연수입니다.
    - 각 단어는 공백문자(스페이스 바) 하나로 구분되어 있습니다.
+ query 배열의 크기는 1 이상 100,000 이하입니다.
+ query의 각 문자열은 "[조건] X" 형식입니다.
    - [조건]은 "개발언어 and 직군 and 경력 and 소울푸드" 형식의 문자열입니다.
    - 언어는 cpp, java, python, - 중 하나입니다.
    - 직군은 backend, frontend, - 중 하나입니다.
    - 경력은 junior, senior, - 중 하나입니다.
    - 소울푸드는 chicken, pizza, - 중 하나입니다.
    - '-' 표시는 해당 조건을 고려하지 않겠다는 의미입니다.
    - X는 코딩테스트 점수를 의미하며 조건을 만족하는 사람 중 X점 이상 받은 사람은 모두 몇 명인 지를 의미합니다.
    - 각 단어는 공백문자(스페이스 바) 하나로 구분되어 있습니다.
    - 예를 들면, "cpp and - and senior and pizza 500"은 "cpp로 코딩테스트를 봤으며, 경력은 senior 이면서 소울푸드로 pizza를 선택한 지원자 중 코딩테스트 점수를 500점 이상 받은 사람은 모두 몇 명인가?"를 의미합니다.


## 내 풀이
***

최근 풀었던 문제 중에서 가장 어려웠던 것 같다... 정확히는 방법을 완전히 잘못 알고 있었다. 인터넷에서 다른 사람들의 코드를 찾아보지 않았다면 평생 못풀었을 것 같은 문제였다.    

몇 번의 시행착오를 거쳐 정확도 테스트는 모두 통과하는 것에 성공했지만, 어떻게 해도 효율성 테스트를 통과할 수가 없었다.    

초기에 시도했던 방법에서는 인자로 들어오는 info 배열의 문자열들을 파싱하여 infos 라는 이차원 배열에 저장하였다.    

query 또한 파싱하여 queries 이차원 배열에 저장하고, 반복문을 통하여 quries 의 조건에 맞는 infos 배열들의 값들을 걸러내어 이들의 갯수를 구하는 방식이었다.    

동작 자체는 문제가 없었지만, 효율성 체크에서 모두 0점을 받고 만다.   

<br/>

### 실패한 코드

<script src="https://gist.github.com/Suppplier/9f14db32369f485a524d340a45a5a129.js"></script>

<br/>

도저히 해결 방법을 알 수가 없어서 프로그래머스 질문하기 게시판이나 인터넷을 검색해본 결과, 조합과 이진탐색을 활용하는 방법을 알아냈다.

만약, java, backend, junior, pizza, 150 의 조건을 가진 지원자 A가 있다고 가정해보자.   
해당 지원자가 체크될 수 있는 query 는 언어, 직군, 경력, 음식 이 자신의 조건에 맞거나, query 에서 해당 요소들을 고려하지 않을 경우 모두 체크될 수 있다.    
-, backend, junior, pizza, 150 이거나 -, backend, -, pizza 이거나, -, -, -, - 인 경우 등.. 다양한 query 에 체크될 수 있다는 것이다.    

점수를 제외한다면 만들어질 수 있는 조합은 4 x 3 x 3 x 3 으로 총 108 가지이다. 때문에 이런 조건들을 미리 조합해두고, 해당 조건에 충족될 수 있는 점수들을 info 에서 해당 조건을 key 로 하는 객체의 value 에 배열 형태로 삽입해 둔다면 탐색이 좀 더 편할 것이다.

모든 조합을 만든 후, query 에서의 조건을 파싱하여 infos 의 key 값과 비교할 수 있는 형태로 만든다. 그 뒤는 infos[key] 의 값으로 들어있는 배열에 조건에 맞는 score 가 몇개인지 이진탐색으로 구하면 된다.

<br/>

1. infos 는 조건들의 조합을 key 로 하고, info 에서 조건들의 조합에 맞는 점수들을 value에 배열 형태로 저장할 객체이다.
2. getComb 함수는 info 에서 각 값을 파싱하여 넣은 ary, 지원자의 정보 중 점수만 따로 score 에 저장한 인자를 받아서 해당 ary 에 대한 모든 조건 조합을 생성하는 함수이다.
3. 이진탐색을 위해 infos 의 모든 score 가 담긴 배열들을 오름차순 정렬 한다.
4. query 배열의 크기만큼 반복되는 반복문을 돌린다.
    1. query[i] 의 문자열을 파싱하여 cnd 에 저장하고, 이 중에서 점수를 의미하는 가장 마지막 값만 빼내어 score 에 저장한다.
    2. cnd 는 배열이므로 이를 join 하여 infos 의 key 로 쓸 수 있는 문자열로 만든다.
    3. infos[cnd] 의 배열 길이가 1 이상이라면, 이진 탐색으로 조건에 맞는 수가 어디부터 시작하는지 찾아낸다. infos[cnd] 의 길이에서 조건에 맞는 수가 있는 위치를 빼면 조건에 맞는 지원자의 수를 알 수 있으므로, 이 값을 삽입한다.
    4. infos[cnd] 가 텅 비어있다면 0을 answer 에 삽입한다.

<br/>

### 성공한 코드

<script src="https://gist.github.com/Suppplier/9f14db32369f485a524d340a45a5a129.js"></script>

## 소감
***

이 문제에만 몇 시간을 썼는지 모르겠다. 어떻게 이런 방법을 생각해내는걸까? 내가 왜 한번 프로그래머의 길을 포기했었는지 기억나게 만들어주는 그런 문제였다..

