---
title: '[BlackCoffee] Lv2 Week2 - Racing Car 2'
author: Bandito
date: 2021-05-28 21:00:00 +0900
categories: [Study, Black Coffee]
tags: [Javascript, HTML, FrontEnd, Black Coffee]
comment: true
description: 'asdsadasd'
---

## Week1 - Racing Car 2
***

<br/>

## 1. proceedGame.js
***

```javascript
import { app_div } from "./index.js"
import { cars } from "./setCarName.js"
import { runningtime } from "./setCount.js"
import { PROGRESS } from "./constant.js";
import { addResultSection } from "./addResult.js"

export let k = 1;

export const addProcessUI = () => {
    let process_section = `<section class="d-flex justify-center mt-5" id="process_section">
                                  <div class="mt-4 d-flex">
                                    ${setPlayersCar()}
                                  </div> 
                          </section>`;

    app_div.insertAdjacentHTML("beforeend", process_section);
    proceedGame();
  };

  const setPlayersCar = () => {
    let playersCar = "";
    for (let i = 0; i < cars.length; i++) {
      playersCar += `<div class="mr-2">
                                  <div class="car-player">${cars[i]}</div>
                                  ${PROGRESS.WAIT}
                              </div>\n`;
    }
    return playersCar;
}
```

+ addProcessUI í•¨ìˆ˜ëŠ” ê° ì°¨ëŸ‰ë“¤ì´ ì§„í–‰ë˜ëŠ” ëª¨ìŠµì„ ë³´ì—¬ì£¼ëŠ” section ì„ ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤.
  1. process_section ì—ëŠ” setPlayersCar ë¥¼ í†µí•´ êµ¬ì„±ëœ ì°¨ëŸ‰ë“¤ì˜ div ë¥¼ í…œí”Œë¦¿ ë¦¬í„°ëŸ´ë¡œ ì¶”ê°€í•˜ì˜€ë‹¤.
  2. ê·¸ í›„ proceedGame í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.

+ setPlayersCar í•¨ìˆ˜ì—ì„œëŠ” cars ë°°ì—´ì— ì¡´ì¬í•˜ëŠ” ì°¨ëŸ‰ ì´ë¦„ë“¤ì„ í†µí•´ ê° ì°¨ëŸ‰ë“¤ì„ í‘œì‹œí•˜ê¸° ìœ„í•œ div ë¥¼ ìƒì„±í•œë‹¤. ì²˜ìŒ ì‹œì‘ì€ ëª¨ë‘ PROGRESS ì˜ WAIT ì„ ì‚¬ìš©í•œë‹¤.


<br/>

```javascript
  const proceedGame = () => {
    let cnt = 0;
    let distance = new Array(cars.length).fill(0);
  
    const timerId = setInterval(() => {
      let move = [];
      for (let j = 0; j < cars.length; j++) {
        if (Math.floor(Math.random() * 10) >= 4) {
          distance[j]++;
          move.push(cars[j]);
        }
      }
      addProgressIcon(move, PROGRESS.MOVE, 0);
      addProgressIcon(cars, PROGRESS.WAIT, 0);
  
      if (++cnt == runningtime) {
        clearInterval(timerId);
        addProgressIcon(cars, "", 1);;
        addResultSection(distance);
      }
    }, 1000);
  };
  
  const addProgressIcon = (list, icon, isfinish) => {
    const players = app_div.querySelectorAll(".car-player");
    players.forEach((x) => {
      if (list.indexOf(x.innerHTML) >= 0) {
        const child = x.parentNode.querySelector(".mt-3");
        if (child != null) x.parentNode.removeChild(child);
        if (!isfinish) x.parentNode.insertAdjacentHTML("beforeend", icon);
      }
    });
  };
```

+ proceedGame í•¨ìˆ˜ì—ì„œëŠ” ê° ì°¨ëŸ‰ë“¤ì˜ ì´ë™ì„ ì§„í–‰í•˜ê³  í‘œì‹œí•˜ëŠ” ë™ì‘ì„ ìˆ˜í–‰í•œë‹¤.
  1. ì°¨ëŸ‰ë“¤ì˜ ìˆ˜ ë§Œí¼ í˜„ì¬ ì›€ì§ì¸ ê±°ë¦¬ë¥¼ ì €ì¥í•˜ëŠ” distance ë°°ì—´ì„ ì„ ì–¸í•˜ê³  0 ìœ¼ë¡œ ì´ˆê¸°í™”í•œë‹¤.
  2. 1 ì´ˆì— í•œë²ˆ ë™ì‘í•˜ëŠ” setInterval í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•œë‹¤.
    1. ëœë¤ ê°’ì„ êµ¬í•˜ì—¬ ì´ ê°’ì´ 4ë¥¼ ë„˜ìœ¼ë©´ í•´ë‹¹ ìë™ì°¨ì˜ ì´ë¦„ì„ move ë°°ì—´ì— ë‹´ëŠ”ë‹¤.
    2. addProgressIcon í•¨ìˆ˜ë¥¼ í†µí•´ move ì— ìˆëŠ” ìë™ì°¨ë“¤ì€ PROGRESS.MOVE ë¥¼ ì¶”ê°€í•˜ê³ , ëª¨ë“  ìë™ì°¨ë“¤ì— PROGRESS.WAIT ì„ ì¶”ê°€í•œë‹¤.
    3. cnt ë¥¼ 1 ì¦ê°€ì‹œí‚¤ê³  ì´ ê°’ì´ runningtime ê³¼ ê°™ì•„ì§€ë©´ setInterval í•¨ìˆ˜ë¥¼ ì¤‘ì§€í•œ ë’¤ ë§ˆì§€ë§‰ìœ¼ë¡œ ì¶”ê°€ëœ PROGRESS.WAIT ì„ ì œê±°í•˜ê³  addResultSection í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.

+ addProgressIcon í•¨ìˆ˜ëŠ” ê²Œì„ì˜ ì§„í–‰ì— ë”°ë¼ ì¶”ê°€ë˜ëŠ” ì•„ì´ì½˜ë“¤ì„ ë‹¤ë£¬ë‹¤.
  1. ì¸ìë¡œ ë°›ì€ list ì— ìˆëŠ” í”Œë ˆì´ì–´ë“¤ì—ê²Œ icon í•­ëª©ì„ ì¶”ê°€í•œë‹¤.
  2. icon ì„ ì¶”ê°€í•˜ê¸° ì „ì— ì´ì „ì— ì¡´ì¬í•˜ë˜ icon ì„ ì œê±°í•œ ë’¤ ì¶”ê°€í•œë‹¤.

<br/>

## 2. addResult.js
***

```javascript
import { MESSAGE } from "./constant.js";
import { app_div } from "./index.js"
import { cars, addInputNameUI } from "./setCarName.js"

export const addResultSection = (distance) => {
    let result_section = `<section class="d-flex justify-center mt-5" id="result_section">
      <div>
        <h2>ğŸ† ìµœì¢… ìš°ìŠ¹ì:${setWinnersName(distance)} ğŸ† </h2>
        <div class="d-flex justify-center">
          <button type="button" class="btn btn-cyan" id="restart">ë‹¤ì‹œ ì‹œì‘í•˜ê¸°</button>
        </div>
      </div>
    </section>`;
    
    app_div.insertAdjacentHTML("beforeend", result_section);
  
    setTimeout(() => alert(MESSAGE.CELEBRATE), 2000);
  
    let restart_btn = app_div.querySelector("#restart");
    restart_btn.addEventListener("click", restartGame);
  };

  const setWinnersName = (distance) => {
    let max = Math.max.apply(null, distance);
    let winners = "";
    for (let i = 0; i < distance.length; i++) {
      if (distance[i] == max) {
        winners += ` ${cars[i]},`;
      }
    }
    return winners.substring(0, winners.length - 1);
  }
  
  const restartGame = () => {
    const sections = app_div.querySelectorAll("section");
    for(let i = 0; i < sections.length; i++){
      app_div.removeChild(sections[i]);
    }
    addInputNameUI();
  };
```

+ addResultSection í•¨ìˆ˜ëŠ” ìµœì¢… ê²°ê³¼ë¥¼ ì¶œë ¥í•˜ëŠ” section ì„ ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤.
  1. ì¸ìë¡œ ë°›ì€ distance ë°°ì—´ì„ setWinnersName í•¨ìˆ˜ë¡œ ë„˜ê²¨ ì²˜ë¦¬ëœ ìŠ¹ë¦¬ìë“¤ì„ ì¶œë ¥í•˜ëŠ” html ì½”ë“œë¥¼ ìƒì„±í•œë‹¤.
  2. ì´ë¥¼ app_div ì— ì¶”ê°€í•˜ê³  2ì´ˆ ë’¤ì— ì¶•í•˜ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•œë‹¤.
  3. ë§¨ ì•„ë˜ì— ì¬ì‹œì‘ì„ í•  ìˆ˜ ìˆëŠ” ë²„íŠ¼ì„ ì¶”ê°€í•œë‹¤.

+ setWinnersName í•¨ìˆ˜ëŠ” distance ë¥¼ í†µí•´ ìŠ¹ìì˜ ì´ë¦„ì„ ê°€ë ¤ë‚´ëŠ” ë™ì‘ì„ ìˆ˜í–‰í•œë‹¤.
  1. distance ì—ì„œ ìµœëŒ€ ê°’ì˜ ìœ„ì¹˜ë“¤ì„ ê³ ë¥´ê³ , í•´ë‹¹ ìœ„ì¹˜ì™€ cars ë°°ì—´ì˜ ë™ì¼í•œ ì¸ë±ìŠ¤ì— ìˆëŠ” ì´ë¦„ ê°’ë“¤ì„ ê°€ì ¸ì™€ ë¬¸ìì—´ë¡œ ë§Œë“ ë‹¤.
  2. ì´ë¥¼ ë³´ê¸° ì¢‹ê²Œ ì˜ë¼ì„œ ë°˜í™˜í•œë‹¤.

+ restartGame í•¨ìˆ˜ëŠ” ê²Œì„ì„ ìƒˆë¡œ ì‹œì‘í•  ìˆ˜ ìˆëŠ” ë²„íŠ¼ì˜ ë™ì‘ì„ ìˆ˜í–‰í•œë‹¤.
  1. ëª¨ë“  section ë“¤ì„ ì œê±°í•œ ë’¤ addInputNameUI í•¨ìˆ˜ë¥¼ ë‹¤ì‹œ í˜¸ì¶œí•œë‹¤.